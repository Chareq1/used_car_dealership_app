<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:documents="clr-namespace:used_car_dealership_app.ViewModels.Documents"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="used_car_dealership_app.Views.Documents.DocumentUpdateView"
             x:DataType="documents:DocumentUpdateViewModel"
             FontFamily="{StaticResource Ubuntu}">
    
    <Design.DataContext>
        <documents:DocumentUpdateViewModel />
    </Design.DataContext>

    <Grid Margin="20,25">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBlock FontSize="24" Text="Edytuj dokument" Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2" FontWeight="Bold" Margin="0,0,0,25"/>

        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" Margin="0,0,0,25">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <TextBlock Text="Opis:" FontWeight="Bold" Margin="0,10,0,0" Grid.Row="0" Grid.Column="0" VerticalAlignment="Top"/>
                <TextBox Text="{Binding Document.Description, Mode=TwoWay}" MaxLength="255" TextWrapping="Wrap" Grid.Row="0" Grid.Column="1" Margin="0,10,0,0" Width="200"/>
                
                <TextBlock Text="ID:  " FontWeight="Bold" Margin="0,10,0,0" Grid.Row="0" Grid.Column="2"  HorizontalAlignment="Right"/>
                <TextBlock Text="{Binding Document.DocumentId}" Margin="0,10,0,0" Grid.Row="0" Grid.Column="3" HorizontalAlignment="Right"/>
                
                <TextBlock Text="Data utworzenia:  " FontWeight="Bold" Margin="0,10,0,0" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center" />
                <DatePicker SelectedDate="{Binding SelectedDate, Mode=TwoWay}" Grid.Row="1" Grid.Column="1" Margin="0,10,0,0"  Width="200"/>

                <TextBlock Text="Klient:" FontWeight="Bold" Margin="0,10,0,0" Grid.Row="2" Grid.Column="0" VerticalAlignment="Center" />
                <ComboBox ItemsSource="{Binding Customers}"  SelectedItem="{Binding Document.Customer, Mode=TwoWay}" DisplayMemberBinding="{Binding FullNamePESEL}" Grid.Row="2" Grid.Column="1" PlaceholderText="{Binding Document.Customer.FullNamePESEL}" Margin="0,10,0,0" Width="200"/>

                <TextBlock Text="Pojazd:" FontWeight="Bold" Margin="0,10,0,0" Grid.Row="3" Grid.Column="0" VerticalAlignment="Center" />
                <ComboBox ItemsSource="{Binding Vehicles}"  SelectedItem="{Binding Document.Vehicle, Mode=TwoWay}" DisplayMemberBinding="{Binding FullNameVin}" Grid.Row="3" Grid.Column="1" PlaceholderText="{Binding Document.Vehicle.FullNameVin}" Margin="0,10,0,0" Width="200" />

                <TextBlock Text="UÅ¼ytkownik:" FontWeight="Bold" Margin="0,10,0,0" Grid.Row="4" Grid.Column="0" VerticalAlignment="Center" />
                <ComboBox ItemsSource="{Binding Users}"  SelectedItem="{Binding Document.User, Mode=TwoWay}" DisplayMemberBinding="{Binding FullNamePESEL}" Grid.Row="4" Grid.Column="1" PlaceholderText="{Binding Document.User.FullNamePESEL}" Margin="0,10,0,0" Width="200"/>
                
                <TextBlock Text="Plik:" FontWeight="Bold" Margin="0,10,0,0" Grid.Row="5" Grid.Column="0" VerticalAlignment="Center" />
                <ScrollViewer Grid.Row="5" Grid.Column="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" Margin="0,10,0,0">
                    <StackPanel>
                        <Border CornerRadius="5" Padding="5" Margin="0,0,5,10" Background="#274D60" Width="200" VerticalAlignment="Center" IsVisible="{Binding IsFileSelected}">
                            <Grid VerticalAlignment="Center">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <PathIcon Grid.Column="0" Data="{StaticResource ImageRegular}" VerticalAlignment="Center" Margin="0,0,10,0"/>
                                       
                                        <TextBlock MaxWidth="115" Grid.Column="1" FontSize="12" Text="{Binding Document.FileName}" VerticalAlignment="Center"/>
                                        
                                        <Button Grid.Column="2" Margin="15,0,0,0" Width="30" Height="30" VerticalAlignment="Center" HorizontalAlignment="Right" Command="{Binding ((documents:DocumentUpdateViewModel)DataContext).DeleteFileCommand, RelativeSource={RelativeSource AncestorType=UserControl}}" CommandParameter="{Binding Document.File}">
                                            <PathIcon Data="{StaticResource DeleteRegular}" Width="20" Height="20"/>
                                            <Button.Styles>
                                                <Style Selector="Button">
                                                    <Setter Property="Background" Value="#FF3B3B" />
                                                </Style>
                                                <Style Selector="Button:pointerover /template/ ContentPresenter">
                                                    <Setter Property="Background" Value="#E3242B" />
                                                </Style>
                                                <Style Selector="Button:pressed /template/ ContentPresenter">
                                                    <Setter Property="Background" Value="#A91B0D" />
                                                </Style>
                                            </Button.Styles>
                                        </Button>
                                    </Grid>
                        </Border>
                        
                        <Border CornerRadius="5" Padding="5" Margin="0,0,5,10" Background="#32A852" VerticalAlignment="Center" Width="200" IsVisible="{Binding IsNewFileSelected}">
                            <Grid VerticalAlignment="Center">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                        
                                <PathIcon Grid.Column="0" Data="{StaticResource ImageAddRegular}" VerticalAlignment="Center" Margin="0,0,10,0"/>
                                        
                                <TextBlock MaxWidth="115" Grid.Column="1" FontSize="12" Text="{Binding NewFileName}" VerticalAlignment="Center"/>
                                       
                                <Button Grid.Column="2" Margin="15,0,0,0" Width="30" Height="30" VerticalAlignment="Center" HorizontalAlignment="Right" Command="{Binding ((documents:DocumentUpdateViewModel)DataContext).DeleteFileCommand, RelativeSource={RelativeSource AncestorType=UserControl}}" CommandParameter="{Binding NewFile}">
                                    <PathIcon Data="{StaticResource DeleteRegular}" Width="20" Height="20"/>
                                    <Button.Styles>
                                        <Style Selector="Button">
                                            <Setter Property="Background" Value="#FF3B3B" />
                                        </Style>
                                        <Style Selector="Button:pointerover /template/ ContentPresenter">
                                            <Setter Property="Background" Value="#E3242B" />
                                        </Style>
                                        <Style Selector="Button:pressed /template/ ContentPresenter">
                                            <Setter Property="Background" Value="#A91B0D" />
                                        </Style>
                                    </Button.Styles>
                                </Button>
                            </Grid>
                        </Border>
                        
                        <Border CornerRadius="5" Padding="5" Margin="0,0,5,10" Background="#FF3B3B" VerticalAlignment="Center" Width="200" IsVisible="{Binding IsFileToDeleteSelected}">
                            <Grid VerticalAlignment="Center">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                        
                                <PathIcon Grid.Column="0" Data="{StaticResource ImageOffRegular}" VerticalAlignment="Center" Margin="0,0,10,0"/>
                                        
                                <TextBlock MaxWidth="150" Grid.Column="1" FontSize="12" Text="{Binding FileToDeleteName}" VerticalAlignment="Center"/>
                            </Grid>
                        </Border>
                    </StackPanel>
                </ScrollViewer>

                <Button Grid.Row="8" Grid.Column="1" Command="{Binding UploadFileCommand}" Padding="5" Width="200" Margin="0,5,0,0">
                    <PathIcon Data="{StaticResource ImageEditRegular}"/>
                    
                    <Button.Styles>
                        <Style Selector="Button">
                            <Setter Property="Background" Value="#6BA3BE" />
                        </Style>
                        <Style Selector="Button:pointerover /template/ ContentPresenter">
                            <Setter Property="Background" Value="#0C969C" />
                        </Style>
                        <Style Selector="Button:pressed /template/ ContentPresenter">
                            <Setter Property="Background" Value="#0A7075" />
                        </Style>
                    </Button.Styles>
                </Button>
            </Grid>
        </ScrollViewer>

        <Grid Grid.Row="2" ColumnDefinitions="Auto,*,Auto">
            <Button Grid.Column="0" HorizontalAlignment="Left" VerticalAlignment="Bottom" CornerRadius="10" Width="50" Height="50" Command="{Binding GoBackCommand}">
                <PathIcon Data="{StaticResource ArrowReplyRegular}"/>
                <Button.Styles>
                    <Style Selector="Button">
                        <Setter Property="Background" Value="#6BA3BE" />
                    </Style>
                    <Style Selector="Button:pointerover /template/ ContentPresenter">
                        <Setter Property="Background" Value="#0C969C" />
                    </Style>
                    <Style Selector="Button:pressed /template/ ContentPresenter">
                        <Setter Property="Background" Value="#0A7075" />
                    </Style>
                </Button.Styles>
            </Button>

            <Button Grid.Column="2" HorizontalAlignment="Right" Command="{Binding UpdateVehicleDataInDatabaseCommand}" VerticalAlignment="Bottom" CornerRadius="10" Width="50" Height="50">
                <PathIcon Data="{StaticResource EditSettingsRegular}"/>
                <Button.Styles>
                    <Style Selector="Button">
                        <Setter Property="Background" Value="#6BA3BE" />
                    </Style>
                    <Style Selector="Button:pointerover /template/ ContentPresenter">
                        <Setter Property="Background" Value="#0C969C" />
                    </Style>
                    <Style Selector="Button:pressed /template/ ContentPresenter">
                        <Setter Property="Background" Value="#0A7075" />
                    </Style>
                </Button.Styles>
            </Button>
        </Grid>
    </Grid>
</UserControl>
